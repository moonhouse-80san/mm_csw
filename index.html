<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="theme-color" content="#2196F3">
	<title>íšŒì› ê´€ë¦¬ ì•±</title>
	<link rel="manifest" href="manifest.json">
	<link rel="apple-touch-icon" href="icon-192x192.png">

	
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 10px;
			overflow-x: hidden;
		}

		.container {
			max-width: 900px;
			margin: 0 auto;
			background: white;
			border-radius: 20px;
			box-shadow: 0 10px 40px rgba(0,0,0,0.2);
			overflow: hidden;
		}

		/* ìˆ˜ì •: ì•”í˜¸ ì…ë ¥ ì„¹ì…˜ì„ ì¢€ ë” ì‘ê²Œ */
		.password-section {
			background: linear-gradient(135deg, #FF9800, #F57C00);
			padding: 10px 15px;
			display: flex;
			flex-direction: column;
			gap: 8px;
			border-bottom: 2px solid #e0e0e0;
		}

		.password-input-group {
			display: flex;
			gap: 8px;
			align-items: center;
		}

		.password-input {
			flex: 1;
			padding: 10px 12px;
			border: 2px solid rgba(255,255,255,0.5);
			border-radius: 8px;
			font-size: 14px;
			background: rgba(255,255,255,0.9);
			color: #333;
			min-width: 0;
		}

		.password-input:focus {
			outline: none;
			border-color: white;
			background: white;
		}

		.unlock-btn {
			padding: 10px 15px;
			background: #2196F3;
			color: white;
			border: none;
			border-radius: 8px;
			font-size: 14px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s;
			white-space: nowrap;
		}

		.unlock-btn:hover {
			background: #1976D2;
			transform: translateY(-2px);
		}

		.lock-status {
			font-size: 12px;
			color: white;
			font-weight: 500;
			padding: 3px 8px;
			background: rgba(0,0,0,0.2);
			border-radius: 12px;
			margin-top: 3px;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 5px;
		}

		.lock-status.locked {
			color: #FFEB3B;
		}

		.lock-status.unlocked {
			color: #4CAF50;
		}

		.header {
			background: linear-gradient(135deg, #2196F3, #1976D2);
			color: white;
			padding: 20px;
			text-align: center;
			position: relative;
		}

		.header h1 {
			font-size: 20px;
			margin-bottom: 5px;
		}

		.club-name {
			font-size: 24px;
			font-weight: bold;
			margin-bottom: 5px;
		}

		.member-count {
			font-size: 14px;
			opacity: 0.9;
		}

		.sync-status {
			position: absolute;
			top: 20px;
			left: 20px;
			font-size: 12px;
			background: rgba(255,255,255,0.2);
			padding: 5px 10px;
			border-radius: 15px;
		}

		.settings-icon {
			position: absolute;
			top: 20px;
			right: 20px;
			width: 30px;
			height: 30px;
			cursor: pointer;
			background: rgba(255,255,255,0.2);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s;
		}

		.settings-icon:hover {
			background: rgba(255,255,255,0.3);
			transform: rotate(90deg);
		}

		.settings-icon svg {
			width: 20px;
			height: 20px;
			fill: white;
		}

		.search-section {
			padding: 15px 20px;
			background: #f8f9fa;
			border-bottom: 2px solid #e0e0e0;
		}

		.search-box {
			display: flex;
			gap: 10px;
			margin-bottom: 10px;
		}

		.search-box input {
			flex: 1;
			padding: 10px 15px;
			border: 2px solid #e0e0e0;
			border-radius: 10px;
			font-size: 14px;
		}

		.search-box input:focus {
			outline: none;
			border-color: #2196F3;
		}

		.filter-buttons {
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
		}

		.filter-btn {
			padding: 6px 12px;
			border: 2px solid #e0e0e0;
			border-radius: 20px;
			background: white;
			font-size: 12px;
			cursor: pointer;
			transition: all 0.3s;
		}

		.filter-btn.active {
			background: #2196F3;
			color: white;
			border-color: #2196F3;
		}

		.form-section {
			padding: 20px;
			background: #f8f9fa;
		}

		.form-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 15px;
		}

		.form-group {
			margin-bottom: 0;
		}

		.form-group.full-width {
			grid-column: 1 / -1;
		}

		.form-group label {
			display: block;
			margin-bottom: 5px;
			color: #333;
			font-weight: 500;
			font-size: 14px;
		}

		.form-group input, 
		.form-group select {
			width: 100%;
			padding: 12px;
			border: 2px solid #e0e0e0;
			border-radius: 10px;
			font-size: 16px;
			transition: border-color 0.3s;
		}

		.form-group input:focus,
		.form-group select:focus {
			outline: none;
			border-color: #2196F3;
		}

		.photo-btn {
			padding: 12px;
			background: linear-gradient(135deg, #2196F3, #1976D2);
			color: white;
			border: none;
			border-radius: 10px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s;
		}

		.photo-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
		}

		.photo-preview-container {
			margin-top: 10px;
			display: none;
			text-align: center;
		}

		.photo-preview {
			position: relative;
			width: 400px;
			height: 400px;
			max-width: 100%;
			border-radius: 10px;
			overflow: hidden;
			border: 2px solid #e0e0e0;
			margin: 0 auto;
			background: #f0f0f0;
		}

		.photo-preview img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.remove-photo-btn {
			position: absolute;
			top: 10px;
			right: 10px;
			width: 40px;
			height: 40px;
			background: #f44336;
			color: white;
			border: none;
			border-radius: 50%;
			cursor: pointer;
			font-size: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 2px 8px rgba(0,0,0,0.3);
			z-index: 10;
		}

		.time-group {
			display: grid;
			grid-template-columns: 1fr auto 1fr;
			gap: 10px;
			align-items: center;
		}

		.time-group span {
			text-align: center;
			font-weight: bold;
			color: #666;
		}

		.schedule-section-header {
			font-size: 14px;
			font-weight: 600;
			color: #2196F3;
			margin: 15px 0 10px 0;
			padding-bottom: 5px;
			border-bottom: 2px solid #e0e0e0;
		}

		.fee-presets {
			display: flex;
			flex-wrap: wrap;
			gap: 5px;
			margin-top: 5px;
		}

		.fee-preset-btn {
			padding: 6px 12px;
			background: #f0f0f0;
			border: 2px solid #e0e0e0;
			border-radius: 6px;
			font-size: 12px;
			cursor: pointer;
			transition: all 0.3s;
		}

		.fee-preset-btn:hover {
			background: #e0e0e0;
		}

		.phone-link {
			color: #1976D2;
			text-decoration: none;
			cursor: pointer;
			transition: color 0.3s;
		}

		.phone-link:hover {
			color: #0d47a1;
			text-decoration: underline;
		}

		/* ìˆ˜ì •: ì¶”ê°€/ìˆ˜ì •/ì´ˆê¸°í™” ë²„íŠ¼ì„ ëª¨ë°”ì¼ì—ì„œ í•œ ì¤„ë¡œ */
		.button-group {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 10px;
			margin-top: 15px;
		}

		.btn {
			padding: 12px;
			border: none;
			border-radius: 10px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: transform 0.2s, box-shadow 0.2s;
			color: white;
		}

		.btn:active {
			transform: scale(0.95);
		}

		.btn-add {
			background: linear-gradient(135deg, #4CAF50, #45a049);
		}

		.btn-update {
			background: linear-gradient(135deg, #2196F3, #1976D2);
		}

		.btn-clear {
			background: linear-gradient(135deg, #FF9800, #F57C00);
		}

		/* ì ê¸ˆ ìƒíƒœì—ì„œ ë¹„í™œì„±í™”ëœ ë²„íŠ¼ */
		.btn-disabled {
			background: linear-gradient(135deg, #9E9E9E, #757575) !important;
			cursor: not-allowed;
			opacity: 0.6;
			position: relative;
		}

		.btn-disabled::after {
			content: "ğŸ”’ ì ê¸ˆ í•´ì œ í•„ìš”";
			position: absolute;
			top: -30px;
			left: 50%;
			transform: translateX(-50%);
			background: #333;
			color: white;
			padding: 5px 10px;
			border-radius: 5px;
			font-size: 12px;
			white-space: nowrap;
			opacity: 0;
			transition: opacity 0.3s;
			pointer-events: none;
			z-index: 1000;
		}

		.btn-disabled:hover::after {
			opacity: 1;
		}

		.tab-section {
			padding: 0 20px;
			background: #f8f9fa;
			border-bottom: 2px solid #e0e0e0;
		}

		.tabs {
			display: flex;
			gap: 5px;
		}

		.tab-btn {
			padding: 10px 20px;
			background: white;
			border: 2px solid #e0e0e0;
			border-bottom: none;
			border-radius: 10px 10px 0 0;
			cursor: pointer;
			font-weight: 500;
			transition: all 0.3s;
		}

		.tab-btn.active {
			background: #2196F3;
			color: white;
			border-color: #2196F3;
		}

		.content-section {
			max-height: 500px;
			overflow-y: auto;
			padding: 20px;
		}

		/* ìˆ˜ì •: íšŒì› ì¹´ë“œ ë ˆì´ì•„ì›ƒ - ì‚¬ì§„ ìš°ì¸¡ì— ì´ë¦„ê³¼ ë²„íŠ¼ */
		.member-card {
			background: white;
			border: 2px solid #e0e0e0;
			border-radius: 12px;
			padding: 15px;
			margin-bottom: 10px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			display: flex;
			align-items: flex-start;
		}

		.member-photo-container {
			width: 100px;
			height: 100px;
			flex-shrink: 0;
			margin-right: 15px;
		}

		.member-photo {
			width: 100%;
			height: 100%;
			border-radius: 8px;
			object-fit: cover;
			border: 2px solid #e0e0e0;
		}

		.member-content {
			flex: 1;
			display: flex;
			flex-direction: column;
		}

		.member-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 10px;
			flex-wrap: wrap;
			gap: 10px;
		}

		.member-name {
			font-size: 18px;
			font-weight: 600;
			color: #333;
		}

		.member-actions {
			display: flex;
			gap: 5px;
		}

		.btn-edit, .btn-delete {
			padding: 8px 15px;
			border: none;
			border-radius: 6px;
			font-size: 14px;
			cursor: pointer;
			color: white;
			font-weight: 600;
			transition: all 0.3s;
		}

		.btn-edit {
			background: #2196F3;
		}

		.btn-delete {
			background: #f44336;
		}

		/* ì ê¸ˆ ìƒíƒœì—ì„œ ë¹„í™œì„±í™”ëœ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ */
		.btn-edit-disabled, .btn-delete-disabled {
			background: #9E9E9E !important;
			cursor: not-allowed;
			opacity: 0.6;
			position: relative;
		}

		.btn-edit-disabled::after,
		.btn-delete-disabled::after {
			content: "ğŸ”’ ì ê¸ˆ í•´ì œ í•„ìš”";
			position: absolute;
			top: -30px;
			left: 50%;
			transform: translateX(-50%);
			background: #333;
			color: white;
			padding: 5px 10px;
			border-radius: 5px;
			font-size: 12px;
			white-space: nowrap;
			opacity: 0;
			transition: opacity 0.3s;
			pointer-events: none;
			z-index: 1000;
		}

		.btn-edit-disabled:hover::after,
		.btn-delete-disabled:hover::after {
			opacity: 1;
		}

		/* ì¶”ê°€: ì ê¸ˆ ìƒíƒœì—ì„œ ë²„íŠ¼ ìˆ¨ê¹€ */
		.btn-hidden {
			display: none !important;
		}

		.member-info {
			font-size: 14px;
			color: #666;
			line-height: 1.8;
		}

		.member-info div {
			margin-bottom: 3px;
		}

		.info-badge {
			display: inline-block;
			padding: 3px 8px;
			background: #e3f2fd;
			color: #1976d2;
			border-radius: 4px;
			font-size: 12px;
			margin-right: 5px;
			margin-top: 5px;
		}

		.schedule-badge {
			display: inline-block;
			padding: 3px 8px;
			background: #f0f4ff;
			color: #4a6bff;
			border-radius: 4px;
			font-size: 12px;
			margin-right: 5px;
			margin-top: 5px;
			border-left: 3px solid #4a6bff;
		}

		.empty-state {
			text-align: center;
			padding: 40px 20px;
			color: #999;
		}

		.empty-state svg {
			width: 80px;
			height: 80px;
			margin-bottom: 15px;
			opacity: 0.3;
		}

		.schedule-section {
			display: none;
		}

		.schedule-section.active {
			display: block;
		}

		.day-schedule {
			margin-bottom: 25px;
		}

		.day-header {
			font-size: 18px;
			font-weight: bold;
			color: #333;
			margin-bottom: 10px;
			padding-bottom: 8px;
			border-bottom: 2px solid #e0e0e0;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.day-name {
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.day-count {
			background: #2196F3;
			color: white;
			padding: 2px 8px;
			border-radius: 10px;
			font-size: 12px;
		}

		.time-slot {
			background: white;
			border: 2px solid #e0e0e0;
			border-radius: 8px;
			padding: 10px;
			margin-bottom: 8px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.time-range {
			font-weight: 500;
			color: #333;
		}

		.time-members {
			display: flex;
			flex-wrap: wrap;
			gap: 5px;
		}

		.time-member {
			background: #e3f2fd;
			padding: 4px 8px;
			border-radius: 4px;
			font-size: 12px;
		}

		.no-schedule {
			color: #999;
			font-style: italic;
			text-align: center;
			padding: 20px;
			background: #f8f9fa;
			border-radius: 8px;
		}

		.modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.5);
			z-index: 1000;
			justify-content: center;
			align-items: center;
		}

		.modal.active {
			display: flex;
		}

		.modal-content {
			background: white;
			padding: 30px;
			border-radius: 15px;
			max-width: 400px;
			width: 90%;
			max-height: 90vh;
			overflow-y: auto;
		}

		.modal-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
		}

		.modal-header h2 {
			font-size: 20px;
		}

		.close-btn {
			width: 30px;
			height: 30px;
			border: none;
			background: #f0f0f0;
			border-radius: 50%;
			cursor: pointer;
			font-size: 20px;
			line-height: 1;
		}

		.modal-content p {
			margin-bottom: 20px;
			font-size: 16px;
		}

		.modal-buttons {
			display: flex;
			gap: 10px;
			justify-content: center;
		}

		.modal-buttons button {
			padding: 10px 20px;
			border: none;
			border-radius: 8px;
			cursor: pointer;
			font-weight: 600;
			color: white;
		}

		.password-input {
			margin-bottom: 15px;
		}

		.password-input input {
			width: 100%;
			padding: 10px;
			border: 2px solid #e0e0e0;
			border-radius: 8px;
			font-size: 14px;
		}

		/* ì¹´ë©”ë¼ ëª¨ë‹¬ ì „ìš© ìŠ¤íƒ€ì¼ */
		#cameraModal .modal-content {
			max-width: 500px !important;
			width: 95%;
			padding: 20px;
		}

		.camera-controls {
			display: flex;
			gap: 10px;
			margin-bottom: 15px;
			justify-content: center;
		}

		.camera-btn {
			padding: 10px 20px;
			border: none;
			border-radius: 8px;
			background: #4CAF50;
			color: white;
			font-weight: 600;
			cursor: pointer;
			flex: 1;
		}

		.camera-btn.active {
			background: #2196F3;
			box-shadow: 0 0 0 2px #fff, 0 0 0 4px #2196F3;
		}

		.camera-btn:last-child {
			background: #2196F3;
		}

		#cameraVideo {
			width: 100%;
			height: auto;
			max-height: 60vh;
			border-radius: 10px;
			background: #000;
			object-fit: cover;
		}

		.capture-btn {
			width: 70px;
			height: 70px;
			border-radius: 50%;
			background: white;
			border: 4px solid #f0f0f0;
			margin: 20px auto;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			transition: all 0.2s;
		}

		.capture-btn:active {
			transform: scale(0.95);
			background: #f0f0f0;
		}

		.capture-inner {
			width: 60px;
			height: 60px;
			border-radius: 50%;
			background: #f44336;
			border: 2px solid white;
		}

		.content-section::-webkit-scrollbar {
			width: 8px;
		}

		.content-section::-webkit-scrollbar-track {
			background: #f1f1f1;
		}

		.content-section::-webkit-scrollbar-thumb {
			background: #888;
			border-radius: 4px;
		}

		@keyframes slideIn {
			from {
				opacity: 0;
				transform: translateY(10px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.member-card {
			animation: slideIn 0.3s ease;
		}

		.time-slot {
			animation: slideIn 0.3s ease;
		}

		/* ìë™ ì ê¸ˆ íƒ€ì´ë¨¸ í‘œì‹œ */
		.lock-timer {
			font-size: 11px;
			margin-left: 5px;
			color: rgba(255,255,255,0.8);
		}

		@media (max-width: 600px) {
			.form-grid {
				grid-template-columns: 1fr;
			}

			/* ìˆ˜ì •: ì¶”ê°€/ìˆ˜ì •/ì´ˆê¸°í™” ë²„íŠ¼ì„ ëª¨ë°”ì¼ì—ì„œ í•œ ì¤„ë¡œ ìœ ì§€ */
			.button-group {
				grid-template-columns: repeat(3, 1fr);
				gap: 8px;
			}

			.button-group .btn {
				padding: 10px;
				font-size: 14px;
			}

			.filter-buttons {
				font-size: 11px;
			}

			.time-group {
				grid-template-columns: 1fr;
				grid-template-rows: auto auto auto;
			}

			.time-group span {
				order: 2;
			}

			.member-card {
				display: flex;
				gap: 14px;
				align-items: flex-start;
			}

			/* ì‚¬ì§„ ì˜ì—­ */
			.member-photo-container {
				width: 90px;
				height: 90px;
				object-fit: cover;
				border-radius: 8px;
				margin-right: 5px;
			}

			/* ì˜¤ë¥¸ìª½ ì „ì²´ ì •ë³´ ì˜ì—­ */
			.member-info-container {
				flex: 1;
			}

			/* ìƒë‹¨: ì´ë¦„ + ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ (ê°™ì€ ì¤„) */
			.member-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 6px;
			}

			/* ì´ë¦„ ê°•ì¡° */
			.member-name {
				font-weight: bold;
				font-size: 17px;
			}

			/* ë²„íŠ¼ ê·¸ë£¹ */
			.member-actions {
				display: flex;
				gap: 6px;
			}

			/* í•˜ë‹¨: ì „í™”ë²ˆí˜¸ + ê¸°íƒ€ ì •ë³´ (ì´ë¦„ ì•„ë˜) */
			.member-info {
				font-size: 14px;
				color: #555;
				line-height: 1.5;
			}

			.photo-preview {
				width: 300px;
				height: 300px;
			}

			#cameraModal .modal-content {
				padding: 15px;
				margin: 10px;
			}

			.camera-controls {
				flex-direction: column;
			}

			.camera-btn {
				width: 100%;
			}

			/* ì•”í˜¸ ì…ë ¥ ì„¹ì…˜ ëª¨ë°”ì¼ ìµœì í™” */
			.password-input-group {
				flex-direction: column;
			}

			.password-input {
				width: 100%;
			}

			.unlock-btn {
				width: 100%;
			}

			.password-section {
				padding: 8px 12px;
			}
			
			.unlock-btn {
				padding: 8px 12px;
				font-size: 13px;
			}
		}

		@media (max-width: 400px) {
			.photo-preview {
				width: 250px;
				height: 250px;
			}
			
			/* ì‘ì€ í™”ë©´ì—ì„œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì¤„ì´ê¸° */
			.button-group .btn {
				font-size: 12px;
				padding: 8px 5px;
			}
			
			.btn-edit, .btn-delete {
				padding: 6px 10px;
				font-size: 12px;
			}
		}

		/* ========== ì¶œì„ ê´€ë¦¬ ì¶”ê°€ ìŠ¤íƒ€ì¼ ========== */
		.attendance-count {
			display: inline-flex;
			align-items: center;
			gap: 5px;
			padding: 4px 10px;
			background: linear-gradient(135deg, #667eea, #764ba2);
			color: white;
			border-radius: 12px;
			font-size: 13px;
			font-weight: 600;
		}

		.attendance-count.near-goal {
			background: linear-gradient(135deg, #FF9800, #F57C00);
			animation: pulse 1.5s infinite;
		}

		.attendance-count.reached-goal {
			background: linear-gradient(135deg, #f44336, #d32f2f);
			animation: pulse 1s infinite;
		}

		@keyframes pulse {
			0%, 100% { transform: scale(1); }
			50% { transform: scale(1.05); }
		}

		.calendar-container {
			background: white;
			border-radius: 15px;
			padding: 15px;
			margin-top: 10px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}

		.calendar-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 15px;
		}

		.calendar-header h3 {
			font-size: 18px;
			color: #333;
			margin: 0;
		}

		.calendar-nav {
			display: flex;
			gap: 8px;
		}

		.calendar-nav-btn {
			padding: 6px 12px;
			background: #2196F3;
			color: white;
			border: none;
			border-radius: 6px;
			cursor: pointer;
			font-size: 12px;
			font-weight: 600;
			transition: all 0.3s;
		}

		.calendar-nav-btn:hover {
			background: #1976D2;
		}

		.calendar-grid {
			display: grid;
			grid-template-columns: repeat(7, 1fr);
			gap: 4px;
		}

		.calendar-day-header {
			text-align: center;
			padding: 8px;
			font-weight: 600;
			color: #666;
			font-size: 12px;
		}

		.calendar-day {
			aspect-ratio: 1;
			border: 2px solid #e0e0e0;
			border-radius: 6px;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			transition: all 0.3s;
			position: relative;
			padding: 4px;
		}

		.calendar-day:hover {
			background: #e3f2fd;
			border-color: #2196F3;
		}

		.calendar-day.other-month {
			opacity: 0.3;
			cursor: not-allowed;
		}

		.calendar-day.today {
			background: #fff3e0;
			border-color: #FF9800;
		}

		.calendar-day-number {
			font-size: 13px;
			font-weight: 600;
			color: #333;
		}

		.calendar-day.has-attendance {
			background: linear-gradient(135deg, #4CAF50, #45a049);
			border-color: #4CAF50;
		}

		.calendar-day.has-attendance .calendar-day-number {
			color: white;
		}

		.calendar-attendance-dot {
			width: 5px;
			height: 5px;
			background: #4CAF50;
			border-radius: 50%;
			margin-top: 2px;
		}

		.calendar-day.has-attendance .calendar-attendance-dot {
			background: white;
		}

		.attendance-alert-modal .modal-content {
			text-align: center;
			max-width: 400px;
		}

		.attendance-alert-icon {
			font-size: 60px;
			margin-bottom: 20px;
		}

		.attendance-alert-modal h2 {
			color: #FF9800;
			font-size: 28px;
			margin-bottom: 15px;
		}

		.attendance-alert-modal p {
			font-size: 18px;
			color: #666;
			margin-bottom: 25px;
			line-height: 1.6;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="header">
			<div class="sync-status" id="syncStatus">â˜ï¸ ë™ê¸°í™”</div>
			<div class="settings-icon" onclick="openSettings()">
				<svg viewBox="0 0 24 24">
					<path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c.04-0.24.24-0.41.48-0.41 h3.84c0.24,0,0.43,0.17,0.47,0.41L19.25,5.35c0.59,0.24,1.13,0.56,1.62,0.94l2.39-0.96c0.22-0.08,0.47,0,0.59,0.22l1.92,3.32 c0.12,0.22,0.07,0.47-0.12,0.61l-2.03,1.58c0.05,0.3,0.07,0.63,0.07,0.94s-0.02,0.64-0.07,0.94l2.03,1.58 c0.18,0.14,0.23,0.41,0.12,0.61l-1.92,3.32c-0.12,0.22-0.37,0.29-0.59,0.22l-2.39-0.96c-0.5,0.38-1.03,0.7-1.62,0.94l-0.36,2.54 c-0.05,0.24-0.24,0.41-0.47,0.41h-3.84c-0.24,0-0.44-0.17-0.48-0.41l-0.36-2.54c-0.59-0.24-1.13-0.56-1.62-0.94l-2.39,0.96 c-0.22,0.08-0.47,0-0.59-0.22l-1.92,3.32c-0.12-0.22-0.07-0.47,0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
				</svg>
			</div>
			<h1>ğŸ‘¥ íšŒì› ê´€ë¦¬</h1>
			<div class="club-name" id="clubNameDisplay">êµ¬ì¥ëª…ì„ ì„¤ì •í•˜ì„¸ìš”</div>
			<div class="member-count">ì´ <span id="memberCount">0</span>ëª…</div>
		</div>

		<div class="search-section">
			<div class="search-box">
				<input type="text" id="searchInput" placeholder="ğŸ” ì´ë¦„, ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰..." onkeyup="searchMembers()">
			</div>
			<div class="filter-buttons">
				<button class="filter-btn active" onclick="sortMembers('name')">ì´ë¦„ìˆœ</button>
				<button class="filter-btn" onclick="sortMembers('registerDate')">ë“±ë¡ì¼ìˆœ</button>
				<button class="filter-btn" onclick="sortMembers('fee')">íšŒë¹„ìˆœ</button>
			</div>

			<!-- ë‹¬ë ¥ -->
			<div class="form-group full-width">
				<label>ì¶œì„ ê´€ë¦¬</label>
				<button type="button" class="photo-btn" onclick="toggleCalendar()" style="margin-bottom: 10px;">
					ğŸ“… <span id="calendarToggleText">ë‹¬ë ¥ ì—´ê¸°</span>
				</button>
				<div class="calendar-container" id="formCalendar" style="display: none;">
					<div class="calendar-header">
						<h3 id="formCalendarTitle">2026ë…„ 1ì›”</h3>
						<div class="calendar-nav">
							<button class="calendar-nav-btn" onclick="previousMonthForm()">â—€ ì´ì „</button>
							<button class="calendar-nav-btn" onclick="nextMonthForm()">ë‹¤ìŒ â–¶</button>
						</div>
					</div>
					<div class="calendar-grid" id="formCalendarGrid"></div>
				</div>
			</div>
		</div>

		<div class="form-section">
			<div class="form-grid">
				<div class="form-group">
					<label for="name">ì´ë¦„ *</label>
					<input type="text" id="name" placeholder="ì´ë¦„ ì…ë ¥">
				</div>
				<div class="form-group">
					<label for="phone">ì „í™”ë²ˆí˜¸</label>
					<input type="tel" id="phone" placeholder="010-1234-5678">
				</div>
				
				<div class="form-group full-width">
					<label for="photo">íšŒì› ì‚¬ì§„</label>
					<div style="display: flex; flex-direction: column; gap: 10px;">
						<div style="display: flex; gap: 10px;">
							<button type="button" class="photo-btn" onclick="openCamera()" style="flex: 1;">
								ğŸ“· ì¹´ë©”ë¼ë¡œ ì°ê¸°
							</button>
							<button type="button" class="photo-btn" onclick="document.getElementById('photoInput').click()" style="flex: 1;">
								ğŸ“ ê°¤ëŸ¬ë¦¬ ì„ íƒ
							</button>
						</div>
						
						<div class="photo-preview-container" id="photoPreviewContainer">
							<div class="photo-preview">
								<img id="photoPreview" src="" alt="íšŒì› ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸°">
								<button type="button" class="remove-photo-btn" onclick="removePhoto()">ğŸ—‘ï¸</button>
							</div>
						</div>
						
						<input type="file" id="photoInput" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
					</div>
				</div>
					
					<!-- ì¶œì„ ê´€ë¦¬ í•„ë“œ ì¶”ê°€ -->
					<div class="form-group">
						<label for="targetCount">ëª©í‘œ ì¶œì„ íšŸìˆ˜</label>
						<input type="number" id="targetCount" placeholder="ê¸°ë³¸ 8íšŒ" value="8" min="1">
					</div>
					<div class="form-group">
						<label for="currentCount">í˜„ì¬ ì¶œì„ íšŸìˆ˜</label>
						<input type="number" id="currentCount" placeholder="0" value="0" min="0" readonly style="background: #f0f0f0;">
					</div>
				<div class="form-group">
					<label for="registerDate">íšŒì›ë“±ë¡ì¼</label>
					<input type="date" id="registerDate">
				</div>
				<div class="form-group">
					<label for="fee">ì›”íšŒë¹„ (ì›)</label>
					<input type="number" id="fee" placeholder="íšŒë¹„ ì…ë ¥">
					<div class="fee-presets" id="feePresets">
						<!-- íšŒë¹„ ê¸°ë³¸ê°’ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
					</div>
				</div>
				
				<!-- ì²« ë²ˆì§¸ ìŠ¤ì¼€ì¤„ -->
				<div class="form-group full-width">
					<div class="schedule-section-header">ğŸ“… ìŠ¤ì¼€ì¤„ 1</div>
					<div class="form-grid" style="grid-template-columns: 1fr 2fr; margin-bottom: 10px;">
						<div class="form-group">
							<label for="day1">ìš”ì¼</label>
							<select id="day1">
								<option value="">ìš”ì¼ ì„ íƒ</option>
								<option value="ì›”">ì›”ìš”ì¼</option>
								<option value="í™”">í™”ìš”ì¼</option>
								<option value="ìˆ˜">ìˆ˜ìš”ì¼</option>
								<option value="ëª©">ëª©ìš”ì¼</option>
								<option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
								<option value="í† ">í† ìš”ì¼</option>
								<option value="ì¼">ì¼ìš”ì¼</option>
							</select>
						</div>
						<div class="form-group">
							<label>ì‹œê°„</label>
							<div class="time-group">
								<input type="time" id="startTime1" step="300">
								<input type="time" id="endTime1" step="300">
							</div>
						</div>
					</div>
				</div>
				
				<!-- ë‘ ë²ˆì§¸ ìŠ¤ì¼€ì¤„ -->
				<div class="form-group full-width">
					<div class="schedule-section-header">ğŸ“… ìŠ¤ì¼€ì¤„ 2</div>
					<div class="form-grid" style="grid-template-columns: 1fr 2fr; margin-bottom: 10px;">
						<div class="form-group">
							<label for="day2">ìš”ì¼</label>
							<select id="day2">
								<option value="">ìš”ì¼ ì„ íƒ</option>
								<option value="ì›”">ì›”ìš”ì¼</option>
								<option value="í™”">í™”ìš”ì¼</option>
								<option value="ìˆ˜">ìˆ˜ìš”ì¼</option>
								<option value="ëª©">ëª©ìš”ì¼</option>
								<option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
								<option value="í† ">í† ìš”ì¼</option>
								<option value="ì¼">ì¼ìš”ì¼</option>
							</select>
						</div>
						<div class="form-group">
							<label>ì‹œê°„</label>
							<div class="time-group">
								<input type="time" id="startTime2" step="300">
								<input type="time" id="endTime2" step="300">
							</div>
						</div>
					</div>
				</div>
				
				<div class="form-group">
					<label for="email">ì´ë©”ì¼</label>
					<input type="email" id="email" placeholder="example@email.com">
				</div>
				<div class="form-group">
					<label for="address">ì£¼ì†Œ</label>
					<input type="text" id="address" placeholder="ì£¼ì†Œ ì…ë ¥">
				</div>
			</div>
			
			<!-- ì¶”ê°€/ìˆ˜ì •/ì´ˆê¸°í™” ë²„íŠ¼ - ëª¨ë°”ì¼ì—ì„œ í•œ ì¤„ë¡œ -->
			<div class="button-group">
				<button class="btn btn-add" onclick="addMember()">ì¶”ê°€</button>
				<button class="btn btn-update btn-disabled" id="updateBtn" onclick="checkLockBeforeUpdate()">ìˆ˜ì •</button>
				<button class="btn btn-clear" onclick="clearForm()">ì´ˆê¸°í™”</button>
			</div>
		</div>

		<div class="tab-section">
			<div class="tabs">
				<button class="tab-btn active" onclick="switchTab('list')">íšŒì› ëª©ë¡</button>
				<button class="tab-btn" onclick="switchTab('schedule')">ğŸ“… ì „ì²´ ìŠ¤ì¼€ì¤„</button>
			</div>
		</div>

		<div class="content-section">
			<div id="listSection">
				<div class="empty-state">
					<svg fill="currentColor" viewBox="0 0 20 20">
						<path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
					</svg>
					<p>ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤</p>
				</div>
			</div>

			<div id="scheduleSection" class="schedule-section">
				<div id="scheduleContent">
					<!-- ì¼ì£¼ì¼ ìŠ¤ì¼€ì¤„ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
				</div>
			</div>
		</div>

		<!-- ìˆ˜ì •: ì•”í˜¸ ì…ë ¥ ì„¹ì…˜ì„ ë” ì‘ê²Œ -->
		<div class="password-section">
			<div class="password-input-group">
				<input type="password" 
					   id="lockPassword" 
					   class="password-input" 
					   placeholder="ìˆ˜ì •/ì‚­ì œ ì•”í˜¸ ì…ë ¥"
					   onkeyup="if(event.key === 'Enter') unlockEditButtons()">
				<button class="unlock-btn" onclick="unlockEditButtons()">
					ğŸ”“ ì ê¸ˆ í•´ì œ
					<div class="lock-status locked" id="lockStatus">
						ğŸ”’ ì ê¹€ ìƒíƒœ - ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ìˆ¨ê¹€
						<span class="lock-timer" id="lockTimer"></span>
					</div>
				</button>
			</div>
		</div>
	</div>

	<!-- ì¹´ë©”ë¼ ëª¨ë‹¬ -->
	<div id="cameraModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>ğŸ“· ì¹´ë©”ë¼</h2>
				<button class="close-btn" onclick="closeCamera()">Ã—</button>
			</div>
			<div style="text-align: center;">
				<!-- ì¹´ë©”ë¼ ì „í™˜ ë²„íŠ¼ -->
				<div class="camera-controls">
					<button class="camera-btn active" id="frontCameraBtn" onclick="switchCamera('user')">
						ğŸ“± ì „ë©´ ì¹´ë©”ë¼
					</button>
					<button class="camera-btn" id="rearCameraBtn" onclick="switchCamera('environment')">
						ğŸ“· í›„ë©´ ì¹´ë©”ë¼
					</button>
				</div>
				
				<video id="cameraVideo" autoplay playsinline></video>
				
				<!-- ì‚¬ì§„ ì°ê¸° ë²„íŠ¼ -->
				<div class="capture-btn" onclick="capturePhoto()">
					<div class="capture-inner"></div>
				</div>
				
				<div style="text-align: center; color: #666; font-size: 14px;">
					ì‚¬ì§„ì„ ì°ìœ¼ë ¤ë©´ ì›í˜• ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”
				</div>
			</div>
		</div>
	</div>

	<div id="passwordModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>ğŸ”’ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</h2>
				<button class="close-btn" onclick="closePasswordModal()">Ã—</button>
			</div>
			<p>ì„¤ì •ì„ ì—´ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
			<div class="password-input">
				<input type="password" id="passwordInput" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" onkeyup="if(event.key === 'Enter') checkPassword()">
			</div>
			<div class="modal-buttons">
				<button style="background: #2196F3;" onclick="checkPassword()">í™•ì¸</button>
				<button style="background: #9E9E9E;" onclick="closePasswordModal()">ì·¨ì†Œ</button>
			</div>
		</div>
	</div>

	<div id="settingsModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>âš™ï¸ ì„¤ì •</h2>
				<button class="close-btn" onclick="closeSettings()">Ã—</button>
			</div>
			<div class="form-group">
				<label for="clubNameInput">êµ¬ì¥ëª…</label>
				<input type="text" id="clubNameInput" placeholder="ì˜ˆ: OOíƒêµ¬ì¥">
			</div>
			
			<!-- ì¶”ê°€: ìë™ ì ê¸ˆ ì‹œê°„ ì„¤ì • -->
			<div class="form-group">
				<label for="lockTimeoutInput">ìë™ ì ê¸ˆ ì‹œê°„ (ë¶„)</label>
				<input type="number" id="lockTimeoutInput" min="1" max="60" placeholder="5">
				<div style="font-size: 12px; color: #666; margin-top: 5px;">
					â€» ì•”í˜¸ ì…ë ¥ í›„ ìë™ìœ¼ë¡œ ì ê¸°ê¸°ê¹Œì§€ì˜ ì‹œê°„ì…ë‹ˆë‹¤. ê¸°ë³¸ê°’: 5ë¶„
				</div>
			</div>
			
			<div class="form-group">
				<label>ì›”íšŒë¹„ ê¸°ë³¸ê°’ ì„¤ì •</label>
				<div class="fee-presets" style="margin-top: 10px;">
					<input type="number" id="feePreset1" placeholder="ê¸°ë³¸ê°’ 1" style="margin-bottom: 5px;">
					<input type="number" id="feePreset2" placeholder="ê¸°ë³¸ê°’ 2" style="margin-bottom: 5px;">
					<input type="number" id="feePreset3" placeholder="ê¸°ë³¸ê°’ 3" style="margin-bottom: 5px;">
					<input type="number" id="feePreset4" placeholder="ê¸°ë³¸ê°’ 4" style="margin-bottom: 5px;">
					<input type="number" id="feePreset5" placeholder="ê¸°ë³¸ê°’ 5" style="margin-bottom: 5px;">
				</div>
			</div>
			<!-- ìˆ˜ì •/ì‚­ì œ ì•”í˜¸ ì„¤ì • ì¶”ê°€ -->
			<div class="form-group">
				<label for="editPassword">ìˆ˜ì •/ì‚­ì œ ì•”í˜¸</label>
				<input type="password" id="editPassword" placeholder="ìˆ˜ì •/ì‚­ì œ ì•”í˜¸ ì…ë ¥">
				<div style="font-size: 12px; color: #666; margin-top: 5px;">
					â€» ìƒë‹¨ ì•”í˜¸ ì…ë ¥ ì¹¸ì— ì‚¬ìš©í•  ì•”í˜¸ì…ë‹ˆë‹¤.
				</div>
			</div>
			<div class="form-group">
				<label for="adminPassword">ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸</label>
				<input type="password" id="adminPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
				<div style="font-size: 12px; color: #666; margin-top: 5px;">
					â€» ì„¤ì • ë©”ë‰´ ì ‘ê·¼ìš© ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.
				</div>
			</div>
			<div class="modal-buttons" style="margin-top: 20px;">
				<button style="background: #2196F3;" onclick="saveSettings()">ì €ì¥</button>
				<button style="background: #9E9E9E;" onclick="closeSettings()">ì·¨ì†Œ</button>
			</div>
			<div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
				<button style="width: 100%; padding: 12px; background: #f44336; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;" onclick="exportData()">ğŸ“¥ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
				<button style="width: 100%; padding: 12px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; margin-top: 10px;" onclick="document.getElementById('importFile').click()">ğŸ“¤ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
				<input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
			</div>
		</div>
	</div>

	<div id="deleteModal" class="modal">
		<div class="modal-content">
			<p>ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
			<div class="modal-buttons">
				<button style="background: #f44336;" onclick="confirmDelete()">ì‚­ì œ</button>
				<button style="background: #9E9E9E;" onclick="closeModal()">ì·¨ì†Œ</button>
			</div>
		</div>
	</div>

	<div id="alertModal" class="modal">
		<div class="modal-content">
			<p id="alertMessage"></p>
			<div class="modal-buttons">
				<button style="background: #2196F3;" onclick="closeAlertModal()">í™•ì¸</button>
			</div>
		</div>
	</div>

	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

	<script>
		// Firebase ì„¤ì •
		const firebaseConfig = {
			apiKey: "AIzaSyD4GrNs2Vw9tSxGHSpKp9MvE8hsJwGo34U",
			authDomain: "mmcsw-880ce.firebaseapp.com",
			databaseURL: "https://mmcsw-880ce-default-rtdb.asia-southeast1.firebasedatabase.app",
			projectId: "mmcsw-880ce",
			storageBucket: "mmcsw-880ce.firebasestorage.app",
			messagingSenderId: "78114283532",
			appId: "1:78114283532:web:7d32e87fae15796e684e29"
		};

		let members = [];

		// ë‹¬ë ¥ ê´€ë ¨ ë³€ìˆ˜
		let currentYear = 2026;
		let currentMonth = 0; // 0-11 (1ì›” = 0)
		let selectedDate = null;
		let filteredMembers = [];
		let currentEditIndex = null;
		let deleteIndex = null;
		let currentSort = 'name';
		let settings = { 
			clubName: '',
			feePresets: [40000, 70000, 100000, 200000, 300000],
			adminPassword: '0000',
			editPassword: '0000', // ìˆ˜ì •/ì‚­ì œìš© ì•”í˜¸ ì¶”ê°€
			lockTimeout: 5 // ìë™ ì ê¸ˆ ì‹œê°„ (ë¶„)
		};
		let firebaseDb = null;
		let currentPhotoData = null;
		let cameraStream = null;
		let currentCameraType = 'user';

		// ë³´ì•ˆ ê´€ë ¨ ë³€ìˆ˜
		let isUnlocked = false;
		let lockTimer = null;
		let remainingTime = 5 * 60; // 5ë¶„ (ì´ˆ ë‹¨ìœ„)
		let lockInterval = null;

		// ìš”ì¼ ë°°ì—´
		const daysOfWeek = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
		const dayNames = {
			'ì›”': 'ì›”ìš”ì¼',
			'í™”': 'í™”ìš”ì¼',
			'ìˆ˜': 'ìˆ˜ìš”ì¼',
			'ëª©': 'ëª©ìš”ì¼',
			'ê¸ˆ': 'ê¸ˆìš”ì¼',
			'í† ': 'í† ìš”ì¼',
			'ì¼': 'ì¼ìš”ì¼'
		};

		// Firebase ì´ˆê¸°í™”
		try {
			firebase.initializeApp(firebaseConfig);
			firebaseDb = firebase.database();
			loadFromFirebase();
			listenToFirebaseChanges();
		} catch (error) {
			console.error('Firebase ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
		}

		// ========== ê°œì„ ëœ ë³´ì•ˆ ê¸°ëŠ¥ ==========
		
		// ì ê¸ˆ ìƒíƒœ ì—…ë°ì´íŠ¸
		function updateLockStatus() {
			const lockStatusEl = document.getElementById('lockStatus');
			const updateBtn = document.getElementById('updateBtn');
			
			if (isUnlocked) {
				lockStatusEl.innerHTML = `ğŸ”“ ì ê¸ˆ í•´ì œë¨ - ${formatTime(remainingTime)} í›„ ìë™ ì ê¸ˆ <span class="lock-timer" id="lockTimer"></span>`;
				lockStatusEl.classList.remove('locked');
				lockStatusEl.classList.add('unlocked');
				
				// ìˆ˜ì • ë²„íŠ¼ í™œì„±í™”
				updateBtn.classList.remove('btn-disabled');
				updateBtn.classList.add('btn-update');
				updateBtn.textContent = 'ìˆ˜ì •';
				
				// íšŒì› ëª©ë¡ì˜ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ í‘œì‹œ
				showMemberButtons();
			} else {
				lockStatusEl.innerHTML = `ğŸ”’ ì ê¹€ ìƒíƒœ - ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ìˆ¨ê¹€ <span class="lock-timer" id="lockTimer"></span>`;
				lockStatusEl.classList.remove('unlocked');
				lockStatusEl.classList.add('locked');
				
				// ìˆ˜ì • ë²„íŠ¼ ë¹„í™œì„±í™”
				updateBtn.classList.remove('btn-update');
				updateBtn.classList.add('btn-disabled');
				updateBtn.textContent = 'ìˆ˜ì •';
				
				// íšŒì› ëª©ë¡ì˜ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
				hideMemberButtons();
			}
		}

		// ì ê¸ˆ í•´ì œ
		function unlockEditButtons() {
			const password = document.getElementById('lockPassword').value;
			
			if (!password) {
				showAlert('ì•”í˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
				return;
			}
			
			// ì´ë¯¸ ì ê¸ˆ í•´ì œëœ ìƒíƒœì—ì„œ ì˜¬ë°”ë¥¸ ì•”í˜¸ë¥¼ ì…ë ¥í•˜ë©´ ì¦‰ì‹œ ì ê¸ˆ
			if (isUnlocked && password === settings.editPassword) {
				isUnlocked = false;
				remainingTime = settings.lockTimeout * 60;
				
				// ìë™ ì ê¸ˆ íƒ€ì´ë¨¸ ì¤‘ì§€
				if (lockInterval) {
					clearInterval(lockInterval);
					lockInterval = null;
				}
				
				// ì•”í˜¸ ì…ë ¥ì¹¸ ì´ˆê¸°í™”
				document.getElementById('lockPassword').value = '';
				
				// ìƒíƒœ ì—…ë°ì´íŠ¸
				updateLockStatus();
				
				// ì•Œë¦¼ ë©”ì‹œì§€
				showAlert('ì•±ì´ ì ê²¼ìŠµë‹ˆë‹¤!');
				return;
			}
			
			if (password === settings.editPassword) {
				isUnlocked = true;
				remainingTime = settings.lockTimeout * 60; // ì„¤ì •ëœ ì‹œê°„ìœ¼ë¡œ ë¦¬ì…‹
				
				// ìë™ ì ê¸ˆ íƒ€ì´ë¨¸ ì‹œì‘
				startAutoLockTimer();
				
				// ì•”í˜¸ ì…ë ¥ì¹¸ ì´ˆê¸°í™”
				document.getElementById('lockPassword').value = '';
				
				// ìƒíƒœ ì—…ë°ì´íŠ¸
				updateLockStatus();
				
				// ì•Œë¦¼ ë©”ì‹œì§€
				showAlert(`ì ê¸ˆì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤! ${settings.lockTimeout}ë¶„ í›„ ìë™ìœ¼ë¡œ ì ê¹ë‹ˆë‹¤.`);
				
				// í™œë™ íƒ€ì´ë¨¸ ë¦¬ì…‹ í•¨ìˆ˜ ì—°ê²°
				resetLockTimer();
			} else {
				showAlert('ì•”í˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤!');
			}
		}

		// ìë™ ì ê¸ˆ íƒ€ì´ë¨¸ ì‹œì‘
		function startAutoLockTimer() {
			if (lockInterval) {
				clearInterval(lockInterval);
			}
			
			lockInterval = setInterval(() => {
				remainingTime--;
				
				// íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
				updateTimerDisplay();
				
				if (remainingTime <= 0) {
					lockEditButtons();
				}
			}, 1000);
		}

		// íƒ€ì´ë¨¸ í‘œì‹œ ì—…ë°ì´íŠ¸
		function updateTimerDisplay() {
			if (isUnlocked) {
				document.getElementById('lockTimer').textContent = `(${formatTime(remainingTime)})`;
			} else {
				document.getElementById('lockTimer').textContent = '';
			}
		}

		// ì‹œê°„ í˜•ì‹í™” (MM:SS)
		function formatTime(seconds) {
			const mins = Math.floor(seconds / 60);
			const secs = seconds % 60;
			return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
		}

		// ì ê¸ˆ
		function lockEditButtons() {
			isUnlocked = false;
			
			if (lockInterval) {
				clearInterval(lockInterval);
				lockInterval = null;
			}
			
			updateLockStatus();
			showAlert('ìë™ ì ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì•”í˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
		}

		// íƒ€ì´ë¨¸ ë¦¬ì…‹ (í™œë™ ê°ì§€)
		function resetLockTimer() {
			if (isUnlocked) {
				remainingTime = settings.lockTimeout * 60; // ì„¤ì •ëœ ì‹œê°„ìœ¼ë¡œ ë¦¬ì…‹
				updateTimerDisplay();
			}
		}

		// íšŒì› ëª©ë¡ì˜ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
		function hideMemberButtons() {
			document.querySelectorAll('.btn-edit, .btn-delete, .btn-edit-disabled, .btn-delete-disabled').forEach(btn => {
				btn.classList.add('btn-hidden');
			});
		}

		// íšŒì› ëª©ë¡ì˜ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ í‘œì‹œí•˜ê¸°
		function showMemberButtons() {
			document.querySelectorAll('.btn-edit, .btn-delete').forEach(btn => {
				btn.classList.remove('btn-hidden');
			});
		}

		// ìˆ˜ì • ì „ ì ê¸ˆ í™•ì¸
		function checkLockBeforeUpdate() {
			if (!isUnlocked) {
				showAlert('ìˆ˜ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € ì ê¸ˆì„ í•´ì œí•´ì£¼ì„¸ìš”!');
				document.getElementById('lockPassword').focus();
				return false;
			}
			resetLockTimer(); // í™œë™ ê°ì§€ - íƒ€ì´ë¨¸ ë¦¬ì…‹
			updateMember();
			return true;
		}

		// ì‚­ì œ ì „ ì ê¸ˆ í™•ì¸
		function checkLockBeforeDelete(index) {
			if (!isUnlocked) {
				showAlert('ì‚­ì œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € ì ê¸ˆì„ í•´ì œí•´ì£¼ì„¸ìš”!');
				document.getElementById('lockPassword').focus();
				return false;
			}
			resetLockTimer(); // í™œë™ ê°ì§€ - íƒ€ì´ë¨¸ ë¦¬ì…‹
			showDeleteModal(index);
			return true;
		}

		// ì¹´ë©”ë¼ ì „í™˜ í•¨ìˆ˜
		function switchCamera(cameraType) {
			currentCameraType = cameraType;
			
			document.getElementById('frontCameraBtn').classList.toggle('active', cameraType === 'user');
			document.getElementById('rearCameraBtn').classList.toggle('active', cameraType === 'environment');
			
			restartCamera();
		}

		// ì¹´ë©”ë¼ ì¬ì‹œì‘
		async function restartCamera() {
			if (cameraStream) {
				cameraStream.getTracks().forEach(track => track.stop());
			}
			
			try {
				const constraints = {
					video: {
						facingMode: currentCameraType,
						width: { ideal: 1280 },
						height: { ideal: 1280 }
					},
					audio: false
				};
				
				cameraStream = await navigator.mediaDevices.getUserMedia(constraints);
				const video = document.getElementById('cameraVideo');
				video.srcObject = cameraStream;
				
				if (currentCameraType === 'user') {
					video.style.transform = 'scaleX(-1)';
				} else {
					video.style.transform = 'none';
				}
				
			} catch (error) {
				console.error('ì¹´ë©”ë¼ ì¬ì‹œì‘ ì‹¤íŒ¨:', error);
				showAlert('ì¹´ë©”ë¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
			}
		}

		// ì¹´ë©”ë¼ ì—´ê¸°
		async function openCamera() {
			try {
				const constraints = {
					video: {
						facingMode: currentCameraType,
						width: { ideal: 1280 },
						height: { ideal: 1280 }
					},
					audio: false
				};
				
				cameraStream = await navigator.mediaDevices.getUserMedia(constraints);
				const video = document.getElementById('cameraVideo');
				video.srcObject = cameraStream;
				
				if (currentCameraType === 'user') {
					video.style.transform = 'scaleX(-1)';
				}
				
				document.getElementById('cameraModal').classList.add('active');
				
			} catch (error) {
				console.error('ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨:', error);
				showAlert('ì¹´ë©”ë¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê°¤ëŸ¬ë¦¬ì—ì„œ ì‚¬ì§„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
				document.getElementById('photoInput').click();
			}
		}

		// ì¹´ë©”ë¼ ë‹«ê¸°
		function closeCamera() {
			if (cameraStream) {
				cameraStream.getTracks().forEach(track => track.stop());
				cameraStream = null;
			}
			
			const video = document.getElementById('cameraVideo');
			video.srcObject = null;
			video.style.transform = '';
			document.getElementById('cameraModal').classList.remove('active');
		}

		// ì‚¬ì§„ ì°ê¸°
		function capturePhoto() {
			const video = document.getElementById('cameraVideo');
			const canvas = document.createElement('canvas');
			const context = canvas.getContext('2d');
			
			canvas.width = 400;
			canvas.height = 400;
			
			const videoAspect = video.videoWidth / video.videoHeight;
			const canvasAspect = 1;
			
			let drawWidth, drawHeight, offsetX, offsetY;
			
			if (videoAspect > canvasAspect) {
				drawHeight = video.videoHeight;
				drawWidth = video.videoHeight * canvasAspect;
				offsetX = (video.videoWidth - drawWidth) / 2;
				offsetY = 0;
			} else {
				drawWidth = video.videoWidth;
				drawHeight = video.videoWidth / canvasAspect;
				offsetX = 0;
				offsetY = (video.videoHeight - drawHeight) / 2;
			}
			
			context.drawImage(
				video, 
				offsetX, offsetY, drawWidth, drawHeight,
				0, 0, canvas.width, canvas.height
			);
			
			if (currentCameraType === 'user') {
				const tempCanvas = document.createElement('canvas');
				const tempContext = tempCanvas.getContext('2d');
				tempCanvas.width = canvas.width;
				tempCanvas.height = canvas.height;
				
				tempContext.translate(canvas.width, 0);
				tempContext.scale(-1, 1);
				tempContext.drawImage(canvas, 0, 0);
				
				context.clearRect(0, 0, canvas.width, canvas.height);
				context.drawImage(tempCanvas, 0, 0);
			}
			
			canvas.toBlob((blob) => {
				if (blob) {
					const reader = new FileReader();
					reader.onload = function(e) {
						currentPhotoData = e.target.result;
						displayPhotoPreview();
						closeCamera();
						showAlert('ì‚¬ì§„ì´ ì´¬ì˜ë˜ì—ˆìŠµë‹ˆë‹¤!');
					};
					reader.readAsDataURL(blob);
				}
			}, 'image/jpeg', 0.8);
		}

		// ì‚¬ì§„ ì—…ë¡œë“œ ì²˜ë¦¬
		function handlePhotoUpload(event) {
			const file = event.target.files[0];
			if (!file) return;

			if (file.size > 5 * 1024 * 1024) {
				showAlert('ì‚¬ì§„ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
				return;
			}

			const reader = new FileReader();
			reader.onload = function(e) {
				const img = new Image();
				img.onload = function() {
					const canvas = document.createElement('canvas');
					const ctx = canvas.getContext('2d');
					
					canvas.width = 400;
					canvas.height = 400;
					
					const scale = Math.max(
						400 / img.width,
						400 / img.height
					);
					
					const newWidth = img.width * scale;
					const newHeight = img.height * scale;
					const x = (400 - newWidth) / 2;
					const y = (400 - newHeight) / 2;
					
					ctx.drawImage(img, x, y, newWidth, newHeight);
					
					currentPhotoData = canvas.toDataURL('image/jpeg', 0.8);
					displayPhotoPreview();
					showAlert('ì‚¬ì§„ì´ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
				};
				img.src = e.target.result;
			};
			reader.readAsDataURL(file);
		}

		// ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
		function displayPhotoPreview() {
			const container = document.getElementById('photoPreviewContainer');
			const preview = document.getElementById('photoPreview');
			
			if (currentPhotoData) {
				preview.src = currentPhotoData;
				container.style.display = 'block';
			} else {
				container.style.display = 'none';
			}
		}

		// ì‚¬ì§„ ì‚­ì œ
		function removePhoto() {
			currentPhotoData = null;
			displayPhotoPreview();
			document.getElementById('photoInput').value = '';
		}

		function loadFromFirebase() {
			firebaseDb.ref('members').once('value', (snapshot) => {
				const data = snapshot.val();
				if (data) {
					members = Object.values(data);
					filteredMembers = [...members];
					renderMembers();
					renderSchedule();
				}
			});

			firebaseDb.ref('settings').once('value', (snapshot) => {
				const data = snapshot.val();
				if (data) {
					if (data.clubName) settings.clubName = data.clubName;
					if (data.feePresets) settings.feePresets = data.feePresets;
					if (data.adminPassword) settings.adminPassword = data.adminPassword;
					if (data.editPassword) settings.editPassword = data.editPassword;
					if (data.lockTimeout) settings.lockTimeout = data.lockTimeout;
					
					document.getElementById('clubNameDisplay').textContent = settings.clubName || 'êµ¬ì¥ëª…ì„ ì„¤ì •í•˜ì„¸ìš”';
					updateFeePresetButtons();
					
					// ì´ˆê¸° ì ê¸ˆ ìƒíƒœ ì„¤ì •
					remainingTime = settings.lockTimeout * 60;
					updateLockStatus();
				}
			});
		}

		function listenToFirebaseChanges() {
			firebaseDb.ref('members').on('value', (snapshot) => {
				const data = snapshot.val();
				if (data) {
					members = Object.values(data);
					filteredMembers = [...members];
					renderMembers();
					renderSchedule();
				}
			});
		}

		function saveToFirebase() {
			const membersObj = {};
			members.forEach((member, index) => {
				membersObj[index] = member;
			});
			
			firebaseDb.ref('members').set(membersObj);
			firebaseDb.ref('settings').set(settings);
		}

		function checkTimeConflict(day1, startTime1, endTime1, day2, startTime2, endTime2, excludeIndex = null) {
			for (let i = 0; i < members.length; i++) {
				if (excludeIndex !== null && i === excludeIndex) continue;
				
				const member = members[i];
				
				if (member.day1 === day1 && member.startTime1 && member.endTime1) {
					if ((startTime1 >= member.startTime1 && startTime1 < member.endTime1) ||
						(endTime1 > member.startTime1 && endTime1 <= member.endTime1) ||
						(startTime1 <= member.startTime1 && endTime1 >= member.endTime1)) {
						return {
							conflict: true,
							memberName: member.name,
							existingTime: `${dayNames[member.day1]} ${member.startTime1}~${member.endTime1}`
						};
					}
				}
				
				if (member.day2 === day1 && member.startTime2 && member.endTime2) {
					if ((startTime1 >= member.startTime2 && startTime1 < member.endTime2) ||
						(endTime1 > member.startTime2 && endTime1 <= member.endTime2) ||
						(startTime1 <= member.startTime2 && endTime1 >= member.endTime2)) {
						return {
							conflict: true,
							memberName: member.name,
							existingTime: `${dayNames[member.day2]} ${member.startTime2}~${member.endTime2}`
						};
					}
				}
				
				if (day2) {
					if (member.day1 === day2 && member.startTime1 && member.endTime1) {
						if ((startTime2 >= member.startTime1 && startTime2 < member.endTime1) ||
							(endTime2 > member.startTime1 && endTime2 <= member.endTime1) ||
							(startTime2 <= member.startTime1 && endTime2 >= member.endTime1)) {
							return {
								conflict: true,
								memberName: member.name,
								existingTime: `${dayNames[member.day1]} ${member.startTime1}~${member.endTime1}`
							};
						}
					}
					
					if (member.day2 === day2 && member.startTime2 && member.endTime2) {
						if ((startTime2 >= member.startTime2 && startTime2 < member.endTime2) ||
							(endTime2 > member.startTime2 && endTime2 <= member.endTime2) ||
							(startTime2 <= member.startTime2 && endTime2 >= member.endTime2)) {
							return {
								conflict: true,
								memberName: member.name,
								existingTime: `${dayNames[member.day2]} ${member.startTime2}~${member.endTime2}`
							};
						}
					}
				}
			}
			return { conflict: false };
		}

		function updateFeePresetButtons() {
			const feePresetsEl = document.getElementById('feePresets');
			feePresetsEl.innerHTML = '';
			
			settings.feePresets.forEach((fee, index) => {
				if (fee) {
					const button = document.createElement('button');
					button.type = 'button';
					button.className = 'fee-preset-btn';
					button.textContent = `${formatNumber(fee)}ì›`;
					button.onclick = () => {
						document.getElementById('fee').value = fee;
					};
					feePresetsEl.appendChild(button);
				}
			});
		}

		function searchMembers() {
			const searchTerm = document.getElementById('searchInput').value.toLowerCase();
			
			if (searchTerm === '') {
				filteredMembers = [...members];
			} else {
				filteredMembers = members.filter(member => {
					return member.name.toLowerCase().includes(searchTerm) ||
						   (member.phone && member.phone.includes(searchTerm));
				});
			}
			
			sortMembers(currentSort);
		}

		function sortMembers(sortBy) {
			currentSort = sortBy;
			
			document.querySelectorAll('.filter-btn').forEach(btn => {
				btn.classList.remove('active');
			});
			event.target.classList.add('active');
			
			switch(sortBy) {
				case 'name':
					filteredMembers.sort((a, b) => a.name.localeCompare(b.name));
					break;
				case 'registerDate':
					filteredMembers.sort((a, b) => {
						if (!a.registerDate) return 1;
						if (!b.registerDate) return -1;
						return new Date(b.registerDate) - new Date(a.registerDate);
					});
					break;
				case 'fee':
					filteredMembers.sort((a, b) => (b.fee || 0) - (a.fee || 0));
					break;
			}
			
			renderMembers();
		}

		function renderMembers() {
			const listEl = document.getElementById('listSection');
			const countEl = document.getElementById('memberCount');
			
			countEl.textContent = members.length;

			if (filteredMembers.length === 0) {
				listEl.innerHTML = `
					<div class="empty-state">
						<svg fill="currentColor" viewBox="0 0 20 20">
							<path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
						</svg>
						<p>${document.getElementById('searchInput').value ? 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤' : 'ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤'}</p>
					</div>
				`;
				return;
			}

			listEl.innerHTML = filteredMembers.map((member, index) => {
				const originalIndex = members.indexOf(member);
				const phoneLink = member.phone ? 
					`<div><a href="tel:${member.phone.replace(/-/g, '')}" class="phone-link">ğŸ“ ${member.phone}</a></div>` : '';
				
				let scheduleBadges = '';
				if (member.day1 && member.startTime1 && member.endTime1) {
					scheduleBadges += `<span class="schedule-badge">${dayNames[member.day1]} ${member.startTime1}~${member.endTime1}</span>`;
				}
				if (member.day2 && member.startTime2 && member.endTime2) {
					scheduleBadges += `<span class="schedule-badge">${dayNames[member.day2]} ${member.startTime2}~${member.endTime2}</span>`;
				}
				const currentCount = member.currentCount || 0;
				const targetCount = member.targetCount || 8;
				let attendanceClass = '';
				if (currentCount === targetCount - 1) {
					attendanceClass = 'near-goal';
				} else if (currentCount >= targetCount) {
					attendanceClass = 'reached-goal';
				}
				const attendanceBadge = `<span class="attendance-count ${attendanceClass}">ğŸ“Š ${currentCount}/${targetCount}íšŒ</span>`;
				
				
				const photoThumb = member.photo ? 
					`<img src="${member.photo}" class="member-photo" alt="${member.name}">` :
					`<div class="member-photo" style="display: flex; align-items: center; justify-content: center; background: #f0f0f0; color: #999; font-size: 32px;">ğŸ‘¤</div>`;
				
				// ë²„íŠ¼ ìˆ¨ê¹€/í‘œì‹œ ì²˜ë¦¬
				const editBtnClass = isUnlocked ? 'btn-edit' : 'btn-edit btn-hidden';
				const deleteBtnClass = isUnlocked ? 'btn-delete' : 'btn-delete btn-hidden';
				
				return `
				<div class="member-card">
					<div class="member-photo-container">
						${photoThumb}
					</div>
					<div class="member-content">
						<div class="member-header">
							<div class="member-name">${member.name}</div>
							<div class="member-actions">
								<button class="${editBtnClass}" data-index="${originalIndex}" onclick="editMember(${originalIndex}); resetLockTimer();">
									ìˆ˜ì •
								</button>
								<button class="${deleteBtnClass}" data-index="${originalIndex}" onclick="showDeleteModal(${originalIndex}); resetLockTimer();">
									ì‚­ì œ
								</button>
							</div>
						</div>
						<div class="member-info">
							${phoneLink}
							${member.registerDate ? `<div>ğŸ“… ë“±ë¡ì¼: ${formatDate(member.registerDate)}</div>` : ''}
							${member.email ? `<div>ğŸ“§ ${member.email}</div>` : ''}
							${member.address ? `<div>ğŸ“ ${member.address}</div>` : ''}
							<div style="margin-top: 8px;">
								${member.fee ? `<span class="info-badge">ğŸ’° ${formatNumber(member.fee)}ì›</span>` : ''}
								${scheduleBadges}
							</div>
						</div>
					</div>
				</div>
			`}).join('');
		}

		function renderSchedule() {
			const scheduleEl = document.getElementById('scheduleContent');
			
			const scheduleByDay = {};
			daysOfWeek.forEach(day => {
				scheduleByDay[day] = [];
			});
			
			members.forEach(member => {
				if (member.day1 && member.startTime1 && member.endTime1) {
					scheduleByDay[member.day1].push({
						name: member.name,
						startTime: member.startTime1,
						endTime: member.endTime1
					});
				}
				if (member.day2 && member.startTime2 && member.endTime2) {
					scheduleByDay[member.day2].push({
						name: member.name,
						startTime: member.startTime2,
						endTime: member.endTime2
					});
				}
			});
			
			let scheduleHTML = '';
			
			daysOfWeek.forEach(day => {
				const dayMembers = scheduleByDay[day];
				
				const timeSlots = {};
				dayMembers.forEach(member => {
					const timeKey = `${member.startTime}-${member.endTime}`;
					if (!timeSlots[timeKey]) {
						timeSlots[timeKey] = {
							startTime: member.startTime,
							endTime: member.endTime,
							members: []
						};
					}
					timeSlots[timeKey].members.push(member.name);
				});
				
				const sortedTimeSlots = Object.values(timeSlots).sort((a, b) => {
					return a.startTime.localeCompare(b.startTime);
				});
				
				scheduleHTML += `
					<div class="day-schedule">
						<div class="day-header">
							<div class="day-name">
								${dayNames[day]}
								<span class="day-count">${dayMembers.length}ëª…</span>
							</div>
						</div>
				`;
				
				if (sortedTimeSlots.length === 0) {
					scheduleHTML += `
						<div class="no-schedule">
							ë“±ë¡ëœ ìŠ¤ì¼€ì¤„ì´ ì—†ìŠµë‹ˆë‹¤
						</div>
					`;
				} else {
					sortedTimeSlots.forEach(slot => {
						scheduleHTML += `
							<div class="time-slot">
								<div class="time-range">${slot.startTime} ~ ${slot.endTime}</div>
								<div class="time-members">
									${slot.members.map(name => `<span class="time-member">${name}</span>`).join('')}
								</div>
							</div>
						`;
					});
				}
				
				scheduleHTML += `</div>`;
			});
			
			scheduleEl.innerHTML = scheduleHTML;
		}

		function formatDate(dateString) {
			const date = new Date(dateString);
			return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
		}

		function formatNumber(num) {
			return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}

		function addMember() {
			const name = document.getElementById('name').value.trim();
			const phone = document.getElementById('phone').value.trim();
			const registerDate = document.getElementById('registerDate').value;
			const fee = document.getElementById('fee').value;
			const day1 = document.getElementById('day1').value;
			const startTime1 = document.getElementById('startTime1').value;
			const endTime1 = document.getElementById('endTime1').value;
			const day2 = document.getElementById('day2').value;
			const startTime2 = document.getElementById('startTime2').value;
			const endTime2 = document.getElementById('endTime2').value;
			const email = document.getElementById('email').value.trim();
			const address = document.getElementById('address').value.trim();

			if (!name) {
				showAlert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
				return;
			}

			const schedules = [];
			
			if (day1 && startTime1 && endTime1) {
				if (startTime1 >= endTime1) {
					showAlert('ì²« ë²ˆì§¸ ìŠ¤ì¼€ì¤„ì˜ ì¢…ë£Œì‹œê°„ì€ ì‹œì‘ì‹œê°„ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤!');
					return;
				}
				schedules.push({ day: day1, startTime: startTime1, endTime: endTime1 });
			}
			
			if (day2 && startTime2 && endTime2) {
				if (startTime2 >= endTime2) {
					showAlert('ë‘ ë²ˆì§¸ ìŠ¤ì¼€ì¤„ì˜ ì¢…ë£Œì‹œê°„ì€ ì‹œì‘ì‹œê°„ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤!');
					return;
				}
				schedules.push({ day: day2, startTime: startTime2, endTime: endTime2 });
			}
			
			for (const schedule of schedules) {
				const conflict = checkTimeConflict(
					schedule.day, 
					schedule.startTime, 
					schedule.endTime,
					null, null, null
				);
				if (conflict.conflict) {
					showAlert(`ì‹œê°„ ì¶©ëŒ! ${conflict.memberName} íšŒì›ì´ ì´ë¯¸ ${conflict.existingTime}ì— ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`);
					return;
				}
			}

			const member = {
				name,
				phone,
				photo: currentPhotoData,
				registerDate: registerDate || new Date().toISOString().split('T')[0],
				fee: fee ? parseInt(fee) : null,
				targetCount: parseInt(document.getElementById("targetCount").value) || 8,
				currentCount: parseInt(document.getElementById("currentCount").value) || 0,
				attendanceDates: [],
				day1: day1 || null,
				startTime1: startTime1 || null,
				endTime1: endTime1 || null,
				day2: day2 || null,
				startTime2: startTime2 || null,
				endTime2: endTime2 || null,
				email,
				address
			};

			members.push(member);
			saveToFirebase();
			filteredMembers = [...members];
			renderMembers();
			renderSchedule();
			clearForm();
			showAlert('íšŒì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
		}

		function updateMember() {
			if (currentEditIndex === null) {
				showAlert('ìˆ˜ì •í•  íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
				return;
			}

			const name = document.getElementById('name').value.trim();
			const phone = document.getElementById('phone').value.trim();
			const registerDate = document.getElementById('registerDate').value;
			const fee = document.getElementById('fee').value;
			const day1 = document.getElementById('day1').value;
			const startTime1 = document.getElementById('startTime1').value;
			const endTime1 = document.getElementById('endTime1').value;
			const day2 = document.getElementById('day2').value;
			const startTime2 = document.getElementById('startTime2').value;
			const endTime2 = document.getElementById('endTime2').value;
			const email = document.getElementById('email').value.trim();
			const address = document.getElementById('address').value.trim();

			if (!name) {
				showAlert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
				return;
			}

			const schedules = [];
			
			if (day1 && startTime1 && endTime1) {
				if (startTime1 >= endTime1) {
					showAlert('ì²« ë²ˆì§¸ ìŠ¤ì¼€ì¤„ì˜ ì¢…ë£Œì‹œê°„ì€ ì‹œì‘ì‹œê°„ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤!');
					return;
				}
				schedules.push({ day: day1, startTime: startTime1, endTime: endTime1 });
			}
			
			if (day2 && startTime2 && endTime2) {
				if (startTime2 >= endTime2) {
					showAlert('ë‘ ë²ˆì§¸ ìŠ¤ì¼€ì¤„ì˜ ì¢…ë£Œì‹œê°„ì€ ì‹œì‘ì‹œê°„ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤!');
					return;
				}
				schedules.push({ day: day2, startTime: startTime2, endTime: endTime2 });
			}
			
			for (const schedule of schedules) {
				const conflict = checkTimeConflict(
					schedule.day, 
					schedule.startTime, 
					schedule.endTime,
					null, null, null,
					currentEditIndex
				);
				if (conflict.conflict) {
					showAlert(`ì‹œê°„ ì¶©ëŒ! ${conflict.memberName} íšŒì›ì´ ì´ë¯¸ ${conflict.existingTime}ì— ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`);
					return;
				}
			}

			members[currentEditIndex] = {
				name,
				phone,
				photo: currentPhotoData !== null ? currentPhotoData : members[currentEditIndex].photo,
				registerDate: registerDate || members[currentEditIndex].registerDate,
				fee: fee ? parseInt(fee) : null,
				targetCount: parseInt(document.getElementById("targetCount").value) || members[currentEditIndex].targetCount || 8,
				currentCount: parseInt(document.getElementById("currentCount").value) || members[currentEditIndex].currentCount || 0,
				attendanceDates: members[currentEditIndex].attendanceDates || [],
				day1: day1 || null,
				startTime1: startTime1 || null,
				endTime1: endTime1 || null,
				day2: day2 || null,
				startTime2: startTime2 || null,
				endTime2: endTime2 || null,
				email,
				address
			};

			saveToFirebase();
			filteredMembers = [...members];
			renderMembers();
			renderSchedule();
			clearForm();
			showAlert('íšŒì› ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
			resetLockTimer(); // í™œë™ ê°ì§€
		}

		function editMember(index) {
			const member = members[index];
			document.getElementById('name').value = member.name;
			document.getElementById('phone').value = member.phone || '';
			document.getElementById('registerDate').value = member.registerDate || '';
			document.getElementById('fee').value = member.fee || '';
			document.getElementById('day1').value = member.day1 || '';
			document.getElementById('startTime1').value = member.startTime1 || '';
			document.getElementById('endTime1').value = member.endTime1 || '';
			document.getElementById('day2').value = member.day2 || '';
			document.getElementById('startTime2').value = member.startTime2 || '';
			document.getElementById('endTime2').value = member.endTime2 || '';
			document.getElementById('email').value = member.email || '';
			document.getElementById('address').value = member.address || '';
			document.getElementById("targetCount").value = member.targetCount || 8;
			document.getElementById("currentCount").value = member.currentCount || 0;
			
			if (member.photo) {
				currentPhotoData = member.photo;
				displayPhotoPreview();
			} else {
				removePhoto();
			}
			
			currentEditIndex = index;
			window.scrollTo({ top: 0, behavior: 'smooth' });
			resetLockTimer(); // í™œë™ ê°ì§€
		}

		function showDeleteModal(index) {
			deleteIndex = index;
			document.getElementById('deleteModal').classList.add('active');
			resetLockTimer(); // í™œë™ ê°ì§€
		}

		function confirmDelete() {
			if (deleteIndex !== null) {
				members.splice(deleteIndex, 1);
				saveToFirebase();
				filteredMembers = [...members];
				renderMembers();
				renderSchedule();
				deleteIndex = null;
				closeModal();
				showAlert('íšŒì›ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
				resetLockTimer(); // í™œë™ ê°ì§€
			}
		}

		function closeModal() {
			document.getElementById('deleteModal').classList.remove('active');
		}

		function showAlert(message) {
			document.getElementById('alertMessage').textContent = message;
			document.getElementById('alertModal').classList.add('active');
		}

		function closeAlertModal() {
			document.getElementById('alertModal').classList.remove('active');
		}

		function clearForm() {
			document.getElementById('name').value = '';
			document.getElementById('phone').value = '';
			document.getElementById('registerDate').value = '';
			document.getElementById('fee').value = '';
			document.getElementById('day1').value = '';
			document.getElementById('startTime1').value = '';
			document.getElementById('endTime1').value = '';
			document.getElementById('day2').value = '';
			document.getElementById('startTime2').value = '';
			document.getElementById('endTime2').value = '';
			document.getElementById('email').value = '';
			document.getElementById('address').value = '';
			document.getElementById("targetCount").value = "8";
			document.getElementById("currentCount").value = "0";
			removePhoto();
			currentEditIndex = null;
			resetLockTimer(); // í™œë™ ê°ì§€
		}

		function switchTab(tabName) {
			document.querySelectorAll('.tab-btn').forEach(btn => {
				btn.classList.remove('active');
			});
			
			document.querySelectorAll('.schedule-section').forEach(section => {
				section.classList.remove('active');
			});
			
			if (tabName === 'list') {
				document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
				document.getElementById('listSection').style.display = 'block';
				document.getElementById('scheduleSection').classList.remove('active');
			} else if (tabName === 'schedule') {
				document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
				document.getElementById('listSection').style.display = 'none';
				document.getElementById('scheduleSection').classList.add('active');
				renderSchedule();
			}
			resetLockTimer(); // í™œë™ ê°ì§€
		}

		function openSettings() {
			document.getElementById('passwordInput').value = '';
			document.getElementById('passwordModal').classList.add('active');
		}

		function closePasswordModal() {
			document.getElementById('passwordModal').classList.remove('active');
		}

		function checkPassword() {
			const inputPassword = document.getElementById('passwordInput').value;
			if (inputPassword === settings.adminPassword) {
				closePasswordModal();
				openSettingsDialog();
			} else {
				showAlert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤!');
			}
		}

		function openSettingsDialog() {
			document.getElementById('clubNameInput').value = settings.clubName || '';
			document.getElementById('lockTimeoutInput').value = settings.lockTimeout || 5;
			document.getElementById('feePreset1').value = settings.feePresets[0] || '';
			document.getElementById('feePreset2').value = settings.feePresets[1] || '';
			document.getElementById('feePreset3').value = settings.feePresets[2] || '';
			document.getElementById('feePreset4').value = settings.feePresets[3] || '';
			document.getElementById('feePreset5').value = settings.feePresets[4] || '';
			document.getElementById('editPassword').value = settings.editPassword || '0000';
			document.getElementById('adminPassword').value = '';
			document.getElementById('settingsModal').classList.add('active');
		}

		function closeSettings() {
			document.getElementById('settingsModal').classList.remove('active');
		}

		function saveSettings() {
			settings.clubName = document.getElementById('clubNameInput').value.trim();
			
			// ìë™ ì ê¸ˆ ì‹œê°„ ì €ì¥
			const lockTimeout = parseInt(document.getElementById('lockTimeoutInput').value);
			if (lockTimeout && lockTimeout >= 1 && lockTimeout <= 60) {
				settings.lockTimeout = lockTimeout;
			} else {
				settings.lockTimeout = 5;
			}
			
			settings.feePresets = [
				parseInt(document.getElementById('feePreset1').value) || 0,
				parseInt(document.getElementById('feePreset2').value) || 0,
				parseInt(document.getElementById('feePreset3').value) || 0,
				parseInt(document.getElementById('feePreset4').value) || 0,
				parseInt(document.getElementById('feePreset5').value) || 0
			];
			
			const newEditPassword = document.getElementById('editPassword').value;
			if (newEditPassword) {
				settings.editPassword = newEditPassword;
			}
			
			const newPassword = document.getElementById('adminPassword').value;
			if (newPassword) {
				settings.adminPassword = newPassword;
			}
			
			saveToFirebase();
			if (settings.clubName) {
				document.getElementById('clubNameDisplay').textContent = settings.clubName;
			}
			updateFeePresetButtons();
			closeSettings();
			showAlert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
			
			// ì•”í˜¸ ë³€ê²½ ì‹œ í˜„ì¬ ì ê¸ˆ ìƒíƒœ ì´ˆê¸°í™”
			if (newEditPassword || lockTimeout) {
				isUnlocked = false;
				remainingTime = settings.lockTimeout * 60;
				updateLockStatus();
			}
		}

		function exportData() {
			const data = {
				members: members,
				settings: settings,
				exportDate: new Date().toISOString()
			};
			
			const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
			const url = URL.createObjectURL(blob);
			const a = document.createElement('a');
			a.href = url;
			a.download = `íšŒì›ë°ì´í„°_${new Date().toISOString().split('T')[0]}.json`;
			a.click();
			URL.revokeObjectURL(url);
			
			showAlert('ë°ì´í„°ê°€ ë‚´ë³´ë‚´ê¸°ë˜ì—ˆìŠµë‹ˆë‹¤!');
			resetLockTimer(); // í™œë™ ê°ì§€
		}

		function importData(event) {
			const file = event.target.files[0];
			if (!file) return;
			
			const reader = new FileReader();
			reader.onload = function(e) {
				try {
					const data = JSON.parse(e.target.result);
					
					if (data.members) {
						members = data.members;
						filteredMembers = [...members];
						saveToFirebase();
					}
					
					if (data.settings) {
						if (data.settings.clubName) {
							settings.clubName = data.settings.clubName;
							document.getElementById('clubNameDisplay').textContent = settings.clubName;
						}
						if (data.settings.feePresets) {
							settings.feePresets = data.settings.feePresets;
						}
						if (data.settings.adminPassword) {
							settings.adminPassword = data.settings.adminPassword;
						}
						if (data.settings.editPassword) {
							settings.editPassword = data.settings.editPassword;
						}
						if (data.settings.lockTimeout) {
							settings.lockTimeout = data.settings.lockTimeout;
						}
						updateFeePresetButtons();
					}
					
					renderMembers();
					renderSchedule();
					closeSettings();
					showAlert('ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤!');
					
					// ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹œ ì ê¸ˆ ìƒíƒœ ì´ˆê¸°í™”
					isUnlocked = false;
					remainingTime = settings.lockTimeout * 60;
					updateLockStatus();
					
				} catch (error) {
					showAlert('ì˜ëª»ëœ íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤!');
				}
			};
			reader.readAsText(file);
		}

		// ì´ˆê¸°í™”
		document.getElementById('registerDate').valueAsDate = new Date();
		document.getElementById('startTime1').value = "19:00";
		document.getElementById('endTime1').value = "21:00";
		document.getElementById('startTime2').value = "19:00";
		document.getElementById('endTime2').value = "21:00";
		
		updateFeePresetButtons();
		updateLockStatus(); // ì´ˆê¸° ì ê¸ˆ ìƒíƒœ ì„¤ì •
		
		// í™œë™ ê°ì§€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
		document.addEventListener('click', resetLockTimer);
		document.addEventListener('keydown', resetLockTimer);
		document.addEventListener('scroll', resetLockTimer);

		// ========== ì¶œì„ ê´€ë¦¬ í•¨ìˆ˜ ==========
		
		function playNotificationSound() {
			const audio = document.getElementById('notificationSound');
			audio.play().catch(e => console.log('ì•Œë¦¼ìŒ ì¬ìƒ ì‹¤íŒ¨:', e));
		}

		function showAttendanceAlert(memberName, currentCount, targetCount) {
			const message = `<strong>${memberName}</strong> íšŒì›ë‹˜<br>í˜„ì¬ ì¶œì„: <strong>${currentCount}íšŒ</strong> / ëª©í‘œ: <strong>${targetCount}íšŒ</strong><br><br>ëª©í‘œ ë‹¬ì„±ì´ ì„ë°•í–ˆìŠµë‹ˆë‹¤!`;
			document.getElementById('attendanceAlertMessage').innerHTML = message;
			document.getElementById('attendanceAlertModal').classList.add('active');
			playNotificationSound();
		}

		function closeAttendanceAlert() {
			document.getElementById('attendanceAlertModal').classList.remove('active');
		}

		// ë‹¬ë ¥ í† ê¸€
		function toggleCalendar() {
			const calendar = document.getElementById('formCalendar');
			const toggleText = document.getElementById('calendarToggleText');
			
			if (calendar.style.display === 'none') {
				calendar.style.display = 'block';
				toggleText.textContent = 'ë‹¬ë ¥ ë‹«ê¸°';
				renderFormCalendar();
			} else {
				calendar.style.display = 'none';
				toggleText.textContent = 'ë‹¬ë ¥ ì—´ê¸°';
			}
			resetLockTimer();
		}

		// ë‹¬ë ¥ ë Œë”ë§
		function renderFormCalendar() {
			const grid = document.getElementById('formCalendarGrid');
			grid.innerHTML = '';

			const monthNames = ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'];
			document.getElementById('formCalendarTitle').textContent = `${currentYear}ë…„ ${monthNames[currentMonth]}`;

			const dayHeaders = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
			dayHeaders.forEach(day => {
				const header = document.createElement('div');
				header.className = 'calendar-day-header';
				header.textContent = day;
				grid.appendChild(header);
			});

			const firstDay = new Date(currentYear, currentMonth, 1).getDay();
			const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
			const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();

			const today = new Date();
			const isCurrentMonth = today.getFullYear() === currentYear && today.getMonth() === currentMonth;
			const todayDate = today.getDate();

			// ì´ì „ ë‹¬ ë‚ ì§œ
			for (let i = firstDay - 1; i >= 0; i--) {
				const day = document.createElement('div');
				day.className = 'calendar-day other-month';
				day.innerHTML = `<div class="calendar-day-number">${daysInPrevMonth - i}</div>`;
				grid.appendChild(day);
			}

			// í˜„ì¬ ë‹¬ ë‚ ì§œ
			for (let date = 1; date <= daysInMonth; date++) {
				const day = document.createElement('div');
				day.className = 'calendar-day';
				
				if (isCurrentMonth && date === todayDate) {
					day.classList.add('today');
				}

				const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
				
				// ì¶œì„ ì²´í¬ í™•ì¸
				let hasAttendance = false;
				members.forEach(member => {
					if (member.attendanceDates && member.attendanceDates.includes(dateStr)) {
						hasAttendance = true;
					}
				});

				if (hasAttendance) {
					day.classList.add('has-attendance');
				}

				day.innerHTML = `
					<div class="calendar-day-number">${date}</div>
					${hasAttendance ? '<div class="calendar-attendance-dot"></div>' : ''}
				`;

				day.onclick = () => selectDate(currentYear, currentMonth, date);
				grid.appendChild(day);
			}

			// ë‹¤ìŒ ë‹¬ ë‚ ì§œ
			const remainingCells = 42 - (firstDay + daysInMonth);
			for (let date = 1; date <= remainingCells; date++) {
				const day = document.createElement('div');
				day.className = 'calendar-day other-month';
				day.innerHTML = `<div class="calendar-day-number">${date}</div>`;
				grid.appendChild(day);
			}
		}

		function previousMonthForm() {
			currentMonth--;
			if (currentMonth < 0) {
				currentMonth = 11;
				currentYear--;
			}
			renderFormCalendar();
		}

		function nextMonthForm() {
			currentMonth++;
			if (currentMonth > 11) {
				currentMonth = 0;
				currentYear++;
			}
			renderFormCalendar();
		}

		function selectDate(year, month, date) {
			if (!isUnlocked) {
				showAlert('ë¨¼ì € ì ê¸ˆì„ í•´ì œí•´ì£¼ì„¸ìš”!');
				return;
			}

			selectedDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
			showAttendanceSelectModal();
			resetLockTimer();
		}

		function showAttendanceSelectModal() {
			const modal = document.getElementById('attendanceSelectModal');
			const list = document.getElementById('memberSelectList');
			list.innerHTML = '';

			if (members.length === 0) {
				list.innerHTML = '<p style="text-align: center; color: #999;">ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
			} else {
				members.forEach((member, index) => {
					const alreadyChecked = member.attendanceDates && member.attendanceDates.includes(selectedDate);
					const currentCount = member.currentCount || 0;
					const targetCount = member.targetCount || 8;

					const item = document.createElement('div');
					item.style.cssText = 'padding: 15px; border-bottom: 1px solid #e0e0e0; cursor: pointer; transition: background 0.3s;';
					item.innerHTML = `
						<div style="display: flex; align-items: center; gap: 10px;">
							<img src="${member.photo || 'https://via.placeholder.com/50'}" style="width: 50px; height: 50px; border-radius: 8px; object-fit: cover;">
							<div style="flex: 1;">
								<div style="font-weight: 600; font-size: 16px;">${member.name}</div>
								<div style="font-size: 13px; color: #666;">ì¶œì„: ${currentCount} / ${targetCount}íšŒ</div>
							</div>
							<div style="color: ${alreadyChecked ? '#4CAF50' : '#999'}; font-size: 24px;">
								${alreadyChecked ? 'âœ“' : 'â—‹'}
							</div>
						</div>
					`;
					
					item.onmouseover = () => item.style.background = '#f8f9fa';
					item.onmouseout = () => item.style.background = 'white';
					item.onclick = () => toggleAttendance(index);
					
					list.appendChild(item);
				});
			}

			modal.classList.add('active');
		}

		function closeAttendanceSelectModal() {
			document.getElementById('attendanceSelectModal').classList.remove('active');
			selectedDate = null;
		}

		function toggleAttendance(memberIndex) {
			const member = members[memberIndex];
			
			if (!member.attendanceDates) {
				member.attendanceDates = [];
			}

			const dateIndex = member.attendanceDates.indexOf(selectedDate);
			
			if (dateIndex === -1) {
				// ì¶œì„ ì¶”ê°€
				member.attendanceDates.push(selectedDate);
				member.currentCount = (member.currentCount || 0) + 1;
				
				const targetCount = member.targetCount || 8;
				
				// ëª©í‘œ 1íšŒ ì „ ì•Œë¦¼
				if (member.currentCount === targetCount - 1) {
					showAttendanceAlert(member.name, member.currentCount, targetCount);
				}
				// ëª©í‘œ ë„ë‹¬ ì•Œë¦¼
				else if (member.currentCount >= targetCount) {
					showAttendanceAlert(member.name, member.currentCount, targetCount);
				}
				
				showAlert(`${member.name} ì¶œì„ ì²´í¬ ì™„ë£Œ! (${member.currentCount}/${targetCount}íšŒ)`);
			} else {
				// ì¶œì„ ì·¨ì†Œ
				member.attendanceDates.splice(dateIndex, 1);
				member.currentCount = Math.max(0, (member.currentCount || 0) - 1);
				const targetCount = member.targetCount || 8;
				showAlert(`${member.name} ì¶œì„ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. (${member.currentCount}/${targetCount}íšŒ)`);
			}

			saveToFirebase();
			renderMembers();
			
			// ë‹¬ë ¥ì´ ì—´ë ¤ìˆìœ¼ë©´ ë‹¤ì‹œ ë Œë”ë§
			const calendar = document.getElementById('formCalendar');
			if (calendar.style.display !== 'none') {
				renderFormCalendar();
			}
			
			closeAttendanceSelectModal();
			resetLockTimer();
		}

		// í˜„ì¬ ë‚ ì§œë¡œ ë‹¬ë ¥ ì´ˆê¸°í™”
		const now = new Date();
		currentYear = now.getFullYear();
		currentMonth = now.getMonth();
	</script>

	<!-- ì¶œì„ ì•Œë¦¼ ëª¨ë‹¬ -->
	<div id="attendanceAlertModal" class="modal attendance-alert-modal">
		<div class="modal-content">
			<div class="attendance-alert-icon">âš ï¸</div>
			<h2>ì¶œì„ ì•Œë¦¼</h2>
			<p id="attendanceAlertMessage"></p>
			<div class="modal-buttons">
				<button class="btn btn-primary" onclick="closeAttendanceAlert()">í™•ì¸</button>
			</div>
		</div>
	</div>

	<!-- ì¶œì„ ì„ íƒ ëª¨ë‹¬ -->
	<div id="attendanceSelectModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>ì¶œì„ ì²´í¬</h2>
			</div>
			<p>ì–´ë–¤ íšŒì›ì˜ ì¶œì„ì„ ì²´í¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
			<div id="memberSelectList" style="max-height: 400px; overflow-y: auto; margin: 20px 0;"></div>
			<div class="modal-buttons">
				<button class="btn btn-secondary" onclick="closeAttendanceSelectModal()">ì·¨ì†Œ</button>
			</div>
		</div>
	</div>

	<!-- ì•Œë¦¼ìŒ ì˜¤ë””ì˜¤ -->
	<audio id="notificationSound" preload="auto">
		<source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGJ0fPTgjMGHm7A7+OZUQ0PVqvl77RpHwU7k9n0zIIyBSGAxPDdl0MKE160/o1mHAY4kdb0yXwsHGHH8d6SRgsUYLXp6atUGgpJou7ykHI0BSmCzvPbeScAD0Sj5fG0aycGOpPY9NOGLAckg8rx24NLKRNit+3wqV4gCU+r5/S3cCYFMIvW9NSKNgkaf8bx35pFDBZmu+nxrl4XCFG06fCzaiQCNJLY9dCFMwsofcjy14IzBx9qveu0bCEGTqve9NmPPQkaaMHw3pkQAERn3+6wcyYGN5PZ9NKJNAojgsnx2IxADBoRdL3s8K9oJAU/ldv119SDMyAaxfHdn0sLFlqz6/K0byMBO5bZ9NOFMgkdcsXw2olCDBdqt+Pwr2soCkyg4fTWiTQDG2y+7PGubCUFPJLZ9dOIMwsfeMPx2IpBDBpiv+7wtXAjB0Cn4PTYijcAEGO96++tbCcFOJHZ9M+HNQsjfsjx2YpDCyFov+vxtGwjB0Ol4vPWiTYBEmS96++va50AAAA=" type="audio/wav">
	</audio>

</body>
</html>